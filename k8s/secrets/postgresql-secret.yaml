apiVersion: v1
kind: Secret
metadata:
  name: postgresql-secret
  labels:
    app: staffjoy
    component: database
type: Opaque
stringData:
  # PostgreSQL 连接信息（云托管数据库）
  db-host: "rm-xxxxx.pg.rds.aliyuncs.com"  # ⚠️ 修改为实际数据库地址
  db-port: "5432"
  db-name: "staffjoy"
  
  # User Service 配置
  user-db-schema: "user_schema"
  user-db-username: "user_service_user"
  user-db-password: "change-me-in-production"  # ⚠️ 生产环境必须修改
  
  # Shift Service 配置
  shift-db-schema: "shift_schema"
  shift-db-username: "shift_service_user"
  shift-db-password: "change-me-in-production"  # ⚠️ 生产环境必须修改
  
  # PostgreSQL root 用户（用于初始化，可选）
  postgres-password: "change-me-in-production"  # ⚠️ 生产环境必须修改

---
# 说明：
# 1. 使用云托管 PostgreSQL（如阿里云 RDS）时：
#    - 修改 db-host 为实际数据库地址
#    - 修改密码为安全密码
#    - 确保数据库白名单包含 K8s 节点 IP
#
# 2. 使用 Kubernetes StatefulSet 自建 PostgreSQL 时：
#    - db-host 使用 Service 名称：postgresql
#    - db-port: 5432
#
# 3. 创建 Secret（命令行方式）：
#    kubectl create secret generic postgresql-secret \
#      --from-literal=db-host='rm-xxxxx.pg.rds.aliyuncs.com' \
#      --from-literal=db-port='5432' \
#      --from-literal=db-name='staffjoy' \
#      --from-literal=user-db-schema='user_schema' \
#      --from-literal=user-db-username='user_service_user' \
#      --from-literal=user-db-password='secure-password' \
#      --from-literal=shift-db-schema='shift_schema' \
#      --from-literal=shift-db-username='shift_service_user' \
#      --from-literal=shift-db-password='secure-password' \
#      --namespace=production

